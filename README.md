AI Browser Agent

Автономный агент для управления веб-браузером, способный выполнять сложные многошаговые задачи без предварительно описанных сценариев и жестко заданных селекторов.
Описание системы

Данное решение реализует паттерн ReAct (Reason + Act), позволяя агенту анализировать состояние веб-страницы в реальном времени и принимать решения на основе визуального контекста. Система не использует заготовленные шаблоны действий, что соответствует требованиям к автономности и универсальности.
Ключевые особенности

    Динамическая разметка DOM: Использование JavaScript-инъекции для построения упрощенной карты интерактивных элементов страницы. Каждому элементу присваивается временный уникальный ID, что позволяет модели работать с лаконичным текстовым представлением вместо избыточного HTML-кода.

    Управление контекстом: Хранение истории действий и рассуждений (Reasoning) для предотвращения зацикливаний и обеспечения логической последовательности выполнения задачи.

    Универсальность: Отсутствие привязки к конкретным доменам или структурам страниц. Агент одинаково эффективно работает с поисковыми системами, сервисами поиска работы и социальными сетями.

    Устойчивость к изменениям: Использование каскадной логики взаимодействия с элементами (стандартный клик, принудительный клик, клик через выполнение скрипта) для обхода перекрывающих элементов и динамических изменений верстки.

Технологический стек

    Язык программирования: Python 3.10+

    Автоматизация браузера: Playwright

    Интеллектуальное ядро: Claude 3.5 Sonnet (через OpenRouter API)

    Интерфейс взаимодействия с LLM: OpenAI SDK

Установка и настройка
Предварительные требования

Должны быть установлены Python и менеджер пакетов pip.

    Установите зависимости проекта:
    code Bash

    pip install -r requirements.txt

    Установите необходимые браузерные бинарные файлы и системные зависимости:
    code Bash

    playwright install chromium
    sudo playwright install-deps

    Создайте файл .env в корневой директории проекта и укажите ваши учетные данные:
    code Text

    OPENROUTER_API_KEY=ваш_ключ_api
    MODEL_NAME=anthropic/claude-3.5-sonnet
    HEADLESS=False
    SLOW_MO=1000

Инструкция по эксплуатации
1. Предварительная авторизация

Для выполнения задач на ресурсах, требующих входа в аккаунт (например, hh.ru), предусмотрен механизм сохранения сессии. Это позволяет избежать проблем с CAPTCHA и двухфакторной аутентификацией во время работы агента.

Запустите утилиту настройки:
code Bash

python auth_setup.py

Авторизуйтесь на нужном сайте вручную в открывшемся окне браузера и нажмите Enter в терминале. Будет создан файл auth.json, который агент будет использовать для доступа к вашим сессиям.
2. Запуск агента

Для начала выполнения задачи запустите основной скрипт:
code Bash

python main.py

Введите текстовое описание задачи при запросе. Примеры поддерживаемых задач:

    "Изучи мое резюме на hh.ru и найди 3 подходящие вакансии AI-инженера"

    "Найди в Wikipedia информацию о последних достижениях в области квантовых вычислений"

    "Зайди на сайт доставки еды и найди ресторан с самым высоким рейтингом"

Структура проекта

    main.py: Точка входа в приложение.

    app/agent.py: Оркестратор логики агента и управления циклом принятия решений.

    app/services/browser.py: Обертка над Playwright для высокоуровневого управления браузером.

    app/services/llm.py: Сервис взаимодействия с API языковой модели.

    app/tools/dom_script.py: JavaScript-скрипт для анализа и упрощения структуры страницы.

    app/tools/prompt.py: Системные инструкции и правила поведения агента.

    app/config.py: Централизованное управление конфигурацией.

Безопасность

Файлы .env и auth.json содержат конфиденциальные данные и по умолчанию исключены из индексации Git через .gitignore. Не передавайте данные файлы третьим лицам.